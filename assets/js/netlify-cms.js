import CMS from 'netlify-cms-app';
// eslint-disable-next-line import/no-unresolved
import * as params from '@params';

CMS.init({
  config: {
    backend: {
      branch: 'main',
      name: 'git-gateway',
    },
    collections: [
      {
        name: 'post',
        label: 'Posts',
        label_singular: 'Post',
        folder: `${params.hugoCmsPath}/content/post`,
        extension: 'md',
        create: true,
        fields: [
          {
            label: 'Title',
            name: 'title',
            widget: 'string',
          },
          {
            label: 'Description',
            name: 'description',
            widget: 'text',
            required: false,
          },
          {
            label: 'Featured Image',
            name: 'image',
            widget: 'image',
            allow_multiple: false,
            choose_url: false,
            required: false,
          },
          {
            label: 'Category',
            name: 'category',
            widget: 'relation',
            collection: 'category',
            search_fields: ['title'],
            value_field: 'title',
            hint: 'For a category to appear here, you must first create it in the category menu.',
            default: 'Uncategorized',
          },
          {
            label: 'Tags',
            name: 'tags',
            widget: 'relation',
            collection: 'tag',
            search_fields: ['title'],
            value_field: 'title',
            hint: 'For a tag to appear here, you must first create it in the tag menu.',
            multiple: true,
            required: false,
          },
          {
            label: 'Authors',
            name: 'authors',
            widget: 'relation',
            collection: 'author',
            search_fields: ['title'],
            value_field: 'title',
            hint: 'For an author to appear here, you must first create it in the author menu.',
            multiple: true,
            default: [params.hugoMainAuthor],
          },
          {
            label: 'Content',
            name: 'body',
            widget: 'markdown',
            required: false,
          },
          {
            label: 'Publish Date',
            name: 'date',
            widget: 'datetime',
          },
          {
            label: 'Draft',
            name: 'draft',
            widget: 'boolean',
            default: false,
          },
        ],
      },
      {
        name: 'category',
        label: 'Categories',
        label_singular: 'Category',
        folder: `${params.hugoCmsPath}/content/category`,
        path: '{{slug}}/_index',
        description:
          'All published categories will be shown as options when you create a new article.',
        extension: 'md',
        create: true,
        fields: [
          {
            label: 'Title',
            name: 'title',
            widget: 'string',
          },
          {
            label: 'Description',
            name: 'description',
            widget: 'text',
            required: false,
          },
          {
            label: 'Featured Image',
            name: 'image',
            widget: 'image',
            allow_multiple: false,
            choose_url: false,
            required: false,
          },
          {
            label: 'Content',
            name: 'body',
            widget: 'markdown',
            required: false,
          },
          {
            label: 'Publish Date',
            name: 'date',
            widget: 'datetime',
          },
          {
            label: 'Draft',
            name: 'draft',
            widget: 'boolean',
            default: false,
          },
        ],
      },
      {
        name: 'tag',
        label: 'Tags',
        label_singular: 'Tag',
        folder: `${params.hugoCmsPath}/content/tags`,
        path: '{{slug}}/_index',
        description:
          'All published tags will be shown as options when you create a new article.',
        extension: 'md',
        create: true,
        fields: [
          {
            label: 'Title',
            name: 'title',
            widget: 'string',
          },
          {
            label: 'Description',
            name: 'description',
            widget: 'text',
            required: false,
          },
          {
            label: 'Featured Image',
            name: 'image',
            widget: 'image',
            allow_multiple: false,
            choose_url: false,
            required: false,
          },
          {
            label: 'Content',
            name: 'body',
            widget: 'markdown',
            required: false,
          },
          {
            label: 'Publish Date',
            name: 'date',
            widget: 'datetime',
          },
          {
            label: 'Draft',
            name: 'draft',
            widget: 'boolean',
            default: false,
          },
        ],
      },
      {
        name: 'author',
        label: 'Authors',
        label_singular: 'Author',
        folder: `${params.hugoCmsPath}/content/authors`,
        path: '{{slug}}/_index',
        description:
          'All published authors will be shown as options when you create a new article.',
        extension: 'md',
        create: true,
        fields: [
          {
            label: 'Name',
            name: 'title',
            widget: 'string',
          },
          {
            label: 'E-Mail',
            name: 'email',
            widget: 'string',
            required: false,
          },
          {
            label: 'Photo',
            name: 'image',
            widget: 'image',
            hint: "The email above will be used as a **gravatar** if you don't upload a profile photo.",
            allow_multiple: false,
            choose_url: false,
            required: false,
          },
          {
            label: 'Bio',
            name: 'body',
            widget: 'markdown',
            required: false,
          },
          {
            label: 'Social',
            name: 'social',
            widget: 'object',
            hint: 'Fill in your username on each social media.',
            fields: [
              {
                label: 'Facebook',
                name: 'facebook',
                widget: 'string',
                required: false,
              },
              {
                label: 'GitHub',
                name: 'github',
                widget: 'string',
                required: false,
              },
              {
                label: 'GitLab',
                name: 'gitlab',
                widget: 'string',
                required: false,
              },
              {
                label: 'LinkedIn',
                name: 'linkedin',
                widget: 'string',
                required: false,
              },
              {
                label: 'Twitter',
                name: 'twitter',
                widget: 'string',
                required: false,
              },
            ],
          },
          {
            label: 'Publish Date',
            name: 'date',
            widget: 'datetime',
          },
          {
            label: 'Draft',
            name: 'draft',
            widget: 'boolean',
            default: false,
          },
        ],
      },
      {
        name: 'page',
        label: 'Pages',
        label_singular: 'Page',
        folder: `${params.hugoCmsPath}/content`,
        path: '{{slug}}/_index',
        filter: { field: 'isSectionPage', value: true },
        description: 'All pages below are a section.',
        extension: 'md',
        create: true,
        fields: [
          {
            label: 'Section Page',
            name: 'isSectionPage',
            widget: 'hidden',
            default: true,
          },
          {
            label: 'Title',
            name: 'title',
            widget: 'string',
          },
          {
            label: 'Description',
            name: 'description',
            widget: 'text',
            required: false,
          },
          {
            label: 'Featured Image',
            name: 'image',
            widget: 'image',
            allow_multiple: false,
            choose_url: false,
            required: false,
          },
          {
            label: 'Content',
            name: 'body',
            widget: 'markdown',
          },
          {
            label: 'Weight',
            name: 'weight',
            widget: 'number',
            default: 0,
            required: false,
          },
          {
            label: 'Publish Date',
            name: 'date',
            widget: 'datetime',
          },
          {
            label: 'Draft',
            name: 'draft',
            widget: 'boolean',
            default: false,
          },
        ],
      },
      {
        name: 'setting',
        label: 'Settings',
        editor: {
          preview: false,
        },
        files: [
          {
            label: 'General',
            name: 'general',
            file: `${params.hugoCmsPath}/config/_default/config.yaml`,
            fields: [
              {
                label: 'Site Title',
                name: 'title',
                widget: 'string',
              },
              {
                label: 'Base URL',
                name: 'baseURL',
                widget: 'string',
                default: '/',
              },
              {
                label: 'Language Code',
                name: 'languageCode',
                widget: 'string',
                hint: 'The language code must be both **the language and the territory**. For example: "en-US".',
                default: 'en-US',
              },
              {
                label: 'Params',
                name: 'params',
                widget: 'object',
                fields: [
                  {
                    label: 'Site Description',
                    name: 'description',
                    widget: 'string',
                  },
                  {
                    label: 'Image',
                    name: 'image',
                    widget: 'image',
                    hint: 'Used as a fallback for thumbnails and open graph. The recommended dimensions are **1200x630** pixels.',
                    allow_multiple: false,
                    choose_url: false,
                  },
                  {
                    label: 'Logo',
                    name: 'logo',
                    widget: 'object',
                    fields: [
                      {
                        label: 'Header',
                        name: 'header',
                        widget: 'image',
                        hint: 'If there is no logo for the header, the **site title** will be displayed.',
                        allow_multiple: false,
                        choose_url: false,
                        required: false,
                      },
                      {
                        label: 'Footer',
                        name: 'footer',
                        widget: 'image',
                        allow_multiple: false,
                        choose_url: false,
                        required: false,
                      },
                    ],
                  },
                  {
                    label: 'Favicon',
                    name: 'favicon',
                    widget: 'object',
                    hint: 'All favicon will be used as is by Hugo, so make sure you use the appropriate icon. You can use the help of online tools like **realfavicongenerator.net**.',
                    fields: [
                      {
                        label: 'ico',
                        name: 'ico',
                        widget: 'file',
                        media_folder: `${params.hugoCmsPath}/static`,
                        public_folder: '',
                        hint: 'This is the minimal icon for the favicon. The recommended icon dimensions are 32x32 pixels.',
                        allow_multiple: false,
                        choose_url: false,
                        required: false,
                      },
                      {
                        label: 'png',
                        name: 'png',
                        widget: 'image',
                        media_folder: `${params.hugoCmsPath}/static`,
                        public_folder: '',
                        hint: 'The recommended icon dimensions are 32x32 pixels.',
                        allow_multiple: false,
                        choose_url: false,
                        required: false,
                      },
                      {
                        label: 'svg',
                        name: 'svg',
                        widget: 'image',
                        media_folder: `${params.hugoCmsPath}/static`,
                        public_folder: '',
                        allow_multiple: false,
                        choose_url: false,
                        required: false,
                      },
                    ],
                  },
                  {
                    label: 'Static Form Acess Key',
                    name: 'staticFormsAccessKey',
                    widget: 'string',
                    hint: 'If this option is filled, a contact form will be displayed. To get the access key, you can visit **staticforms.xyz**.',
                    required: false,
                  },
                ],
              },
              {
                label: 'Page based menu',
                name: 'sectionPagesMenu',
                widget: 'select',
                options: [
                  {
                    label: 'Enable',
                    value: 'main',
                  },
                  {
                    label: 'Disable',
                    value: 'none',
                  },
                ],
                default: 'main',
                hint: 'This option will display all pages as navigation menu item.',
              },
              {
                label: 'Paginate',
                name: 'paginate',
                widget: 'number',
                value_type: 'int',
                hint: 'The ideal number for articles per page is an **even number**.',
                default: 8,
              },
              {
                label: 'Markup',
                name: 'markup',
                widget: 'object',
                fields: [
                  {
                    label: 'Highlight',
                    name: 'highlight',
                    widget: 'object',
                    fields: [
                      {
                        label: 'Style',
                        name: 'style',
                        widget: 'select',
                        options: params.hugoChromaStyles,
                        hint: 'All style options are generated based on the **Chroma** repository.',
                      },
                    ],
                  },
                ],
              },
              {
                label: 'Disqus shortname',
                name: 'disqusShortname',
                widget: 'string',
                hint: "Your Disqus's shortname, which is the unique identifier for your website as registered on Disqus.",
                required: false,
              },
              {
                label: 'Timeout',
                name: 'timeout',
                widget: 'number',
                value_type: 'int',
                default: 10000,
              },
            ],
          },
          {
            label: 'Menu Navigation',
            name: 'menu',
            file: `${params.hugoCmsPath}/config/_default/menu.yaml`,
            fields: [
              {
                label: 'Menu',
                name: 'main',
                widget: 'list',
                fields: [
                  {
                    label: 'Identifier',
                    name: 'identifier',
                    widget: 'string',
                    hint: 'If this menu refers to a section, then this column must be filled with the name of that section.',
                  },
                  {
                    label: 'Name',
                    name: 'name',
                    widget: 'string',
                  },
                  {
                    label: 'URL',
                    name: 'pageRef',
                    widget: 'string',
                    hint: 'The URLs must be relative to the context root. If the **baseURL** is **https://example.com/mysite/**, then the URLs in the menu must not include the context root **mysite**.',
                  },
                  {
                    label: 'Child of',
                    name: 'parent',
                    widget: 'string',
                    hint: 'If you want this to be a sub menu, please include the identifier of the menu you want to serve as the parent.',
                    default: '',
                    required: false,
                  },
                  {
                    label: 'Params',
                    name: 'params',
                    widget: 'object',
                    fields: [
                      {
                        label: 'Hide from menu',
                        name: 'hidden',
                        widget: 'boolean',
                        hint: 'This option will be useful if you want to hide page-based menu.',
                        default: false,
                        required: false,
                      },
                    ],
                  },
                ],
              },
            ],
          },
          {
            label: 'Main Author',
            name: 'author',
            file: `${params.hugoCmsPath}/config/_default/author.yaml`,
            fields: [
              {
                label: 'Name',
                name: 'name',
                widget: 'string',
                hint: 'For this author to appear in the article, please create a new author with the same name.',
              },
              {
                label: 'E-Mail',
                name: 'email',
                widget: 'string',
                required: false,
              },
              {
                label: 'Photo',
                name: 'image',
                widget: 'image',
                hint: "The email above will be used as a **gravatar** if you don't upload a profile photo.",
                allow_multiple: false,
                choose_url: false,
                required: false,
              },
              {
                label: 'Bio',
                name: 'bio',
                widget: 'text',
                required: false,
              },
              {
                label: 'Social',
                name: 'social',
                widget: 'object',
                hint: 'Fill in your username on each social media.',
                fields: [
                  {
                    label: 'Facebook',
                    name: 'facebook',
                    widget: 'string',
                    required: false,
                  },
                  {
                    label: 'GitHub',
                    name: 'github',
                    widget: 'string',
                    required: false,
                  },
                  {
                    label: 'GitLab',
                    name: 'gitlab',
                    widget: 'string',
                    required: false,
                  },
                  {
                    label: 'LinkedIn',
                    name: 'linkedin',
                    widget: 'string',
                    required: false,
                  },
                  {
                    label: 'Twitter',
                    name: 'twitter',
                    widget: 'string',
                    required: false,
                  },
                ],
              },
              {
                label: 'Widget',
                name: 'widget',
                widget: 'boolean',
                hint: 'Show your author profile in the sidebar widget.',
                default: true,
              },
            ],
          },
        ],
      },
    ],
    load_config_file: false,
    local_backend: params.hugoEnvironment === 'development',
    media_folder: `${params.hugoCmsPath}/assets/img`,
    public_folder: '/img',
  },
});
